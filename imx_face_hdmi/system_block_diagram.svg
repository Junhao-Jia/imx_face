<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="1000" height="800" fill="#ffffff"/>
  
  <!-- 箭头标记定义 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000000"/>
    </marker>
  </defs>
  
  <!-- 标题 -->
  <text x="500" y="50" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">IMX ISP 高清图像处理系统架构图</text>
  
  <!-- 时钟生成模块 -->
  <rect x="100" y="100" width="180" height="60" rx="10" fill="#e6f3ff" stroke="#000000" stroke-width="2"/>
  <text x="190" y="135" font-family="Arial" font-size="14" text-anchor="middle">时钟生成模块</text>
  <text x="190" y="155" font-family="Arial" font-size="12" text-anchor="middle">pll</text>
  <text x="190" y="180" font-family="Arial" font-size="10" text-anchor="middle">pclkx1/pclkx5/S_clk_70m/clk_24m</text>
  
  <!-- 摄像头配置模块 -->
  <rect x="100" y="220" width="180" height="80" rx="10" fill="#e6fff2" stroke="#000000" stroke-width="2"/>
  <text x="190" y="245" font-family="Arial" font-size="14" text-anchor="middle">摄像头配置模块</text>
  <text x="140" y="270" font-family="Arial" font-size="12" text-anchor="middle">ae_set</text>
  <text x="140" y="285" font-family="Arial" font-size="10" text-anchor="middle">自动曝光配置</text>
  <text x="240" y="270" font-family="Arial" font-size="12" text-anchor="middle">uicfgcs500</text>
  <text x="240" y="285" font-family="Arial" font-size="10" text-anchor="middle">摄像头配置</text>
  
  <!-- 图像输入接口 -->
  <rect x="100" y="340" width="180" height="140" rx="10" fill="#fff0e6" stroke="#000000" stroke-width="2"/>
  <text x="190" y="365" font-family="Arial" font-size="14" text-anchor="middle">图像输入接口</text>
  <text x="190" y="395" font-family="Arial" font-size="12" text-anchor="middle">mipi_dphy_rx</text>
  <text x="190" y="410" font-family="Arial" font-size="10" text-anchor="middle">4通道接收</text>
  <text x="190" y="430" font-family="Arial" font-size="12" text-anchor="middle">csi_unpacket_4lane</text>
  <text x="190" y="455" font-family="Arial" font-size="12" text-anchor="middle">raw10_unpacket_4lane</text>
  
  <!-- 图像处理模块 -->
  <rect x="350" y="340" width="200" height="140" rx="10" fill="#ffe6e6" stroke="#000000" stroke-width="2"/>
  <text x="450" y="365" font-family="Arial" font-size="14" text-anchor="middle">图像处理模块</text>
  <text x="450" y="395" font-family="Arial" font-size="12" text-anchor="middle">image_correction</text>
  <text x="450" y="410" font-family="Arial" font-size="10" text-anchor="middle">图像裁剪纠正</text>
  <text x="450" y="430" font-family="Arial" font-size="12" text-anchor="middle">isp_top</text>
  <text x="450" y="445" font-family="Arial" font-size="10" text-anchor="middle">ISP图像处理</text>
  <text x="450" y="465" font-family="Arial" font-size="12" text-anchor="middle">face_recognition</text>
  <text x="450" y="480" font-family="Arial" font-size="10" text-anchor="middle">人脸识别</text>
  
  <!-- 内存接口模块 -->
  <rect x="620" y="220" width="180" height="140" rx="10" fill="#e6e6ff" stroke="#000000" stroke-width="2"/>
  <text x="710" y="245" font-family="Arial" font-size="14" text-anchor="middle">内存接口模块</text>
  <text x="710" y="270" font-family="Arial" font-size="12" text-anchor="middle">ddr_ip</text>
  <text x="710" y="285" font-family="Arial" font-size="10" text-anchor="middle">DDR3 PHY接口</text>
  <text x="710" y="305" font-family="Arial" font-size="12" text-anchor="middle">uiFDMA</text>
  <text x="710" y="320" font-family="Arial" font-size="10" text-anchor="middle">AXI控制器</text>
  <rect x="620" y="340" width="180" height="40" rx="5" fill="#f0f0f0" stroke="#000000" stroke-width="1"/>
  <text x="710" y="365" font-family="Arial" font-size="12" text-anchor="middle">实际DDR3内存</text>
  
  <!-- 帧缓冲控制 -->
  <rect x="620" y="420" width="180" height="100" rx="10" fill="#fff0e6" stroke="#000000" stroke-width="2"/>
  <text x="710" y="445" font-family="Arial" font-size="14" text-anchor="middle">帧缓冲控制</text>
  <text x="710" y="470" font-family="Arial" font-size="12" text-anchor="middle">uisetvbuf</text>
  <text x="710" y="485" font-family="Arial" font-size="10" text-anchor="middle">3帧缓存管理</text>
  <text x="710" y="505" font-family="Arial" font-size="12" text-anchor="middle">uidbuf</text>
  <text x="710" y="520" font-family="Arial" font-size="10" text-anchor="middle">帧缓冲控制器</text>
  
  <!-- 视频时序控制 -->
  <rect x="350" y="520" width="180" height="60" rx="10" fill="#e6ffe6" stroke="#000000" stroke-width="2"/>
  <text x="440" y="550" font-family="Arial" font-size="14" text-anchor="middle">视频时序控制</text>
  <text x="440" y="570" font-family="Arial" font-size="12" text-anchor="middle">uivtc</text>
  <text x="440" y="590" font-family="Arial" font-size="12" text-anchor="middle">1080P @ 137.5MHz</text>
  
  <!-- 显示输出 -->
  <rect x="100" y="520" width="180" height="60" rx="10" fill="#e6f3ff" stroke="#000000" stroke-width="2"/>
  <text x="190" y="550" font-family="Arial" font-size="14" text-anchor="middle">显示输出</text>
  <text x="190" y="570" font-family="Arial" font-size="12" text-anchor="middle">hdmi_tx</text>
  <text x="190" y="590" font-family="Arial" font-size="12" text-anchor="middle">HDMI输出 1080P</text>
  
  <!-- 优化的连接线 -->
  <!-- 时钟到各模块 - 使用分叉结构 -->
  <line x1="190" y1="160" x2="190" y2="650" stroke="#000000" stroke-width="1" stroke-dasharray="4"/>
  <!-- 时钟到摄像头配置 -->
  <line x1="190" y1="220" x2="190" y2="240" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <!-- 时钟到图像输入 -->
  <line x1="190" y1="340" x2="190" y2="360" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <!-- 时钟到图像处理 -->
  <line x1="200" y1="340" x2="350" y2="340" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <!-- 时钟到视频时序 -->
  <line x1="200" y1="520" x2="350" y2="520" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <!-- 时钟到显示输出 -->
  <line x1="190" y1="520" x2="190" y2="540" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 摄像头配置到MIPI -->
  <line x1="190" y1="300" x2="190" y2="340" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 图像处理流程 -->
  <line x1="280" y1="400" x2="350" y2="400" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 图像处理到帧缓冲 -->
  <line x1="550" y1="400" x2="620" y2="470" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 帧缓冲控制与内存接口连接 -->
  <line x1="710" y1="420" x2="710" y2="380" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="710" y1="300" x2="710" y2="340" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 帧缓冲控制到视频时序控制 -->
  <line x1="620" y1="470" x2="350" y2="550" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 视频时序控制到显示输出 -->
  <line x1="350" y1="550" x2="190" y2="550" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 内部模块连接 -->
  <line x1="450" y1="400" x2="450" y2="425" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="435" x2="450" y2="460" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 帧缓冲内部连接 -->
  <line x1="710" y1="475" x2="710" y2="500" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- 数据流向指示 -->
  <text x="850" y="340" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">数据流向</text>
  <line x1="850" y1="360" x2="850" y2="400" stroke="#000000" stroke-width="1" marker-end="url(#arrowhead)"/>
  <text x="850" y="420" font-family="Arial" font-size="12" text-anchor="middle">输入 → 处理 → 输出</text>
</svg>