<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2023-11-21T10:00:00.000Z" agent="Mozilla/5.0" etag="abc123" version="19.0.5">
  <diagram id="system_block_diagram" name="IMX ISP系统框图">
    <mxGraphModel dx="1000" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- 标题 -->
        <mxCell id="title" value="IMX ISP 高清图像处理系统架构图" style="text;html=1;strokeWidth=0;fillColor=none;align=center;fontSize=20;fontWeight=bold;" parent="1">
          <mxGeometry x="200" y="20" width="600" height="40" as="geometry"/>
        </mxCell>
        
        <!-- 时钟生成模块 -->
        <mxCell id="clock_gen" value="时钟生成模块\npll" style="rounded=1;strokeWidth=2;fillColor=#e6f3ff;" parent="1">
          <mxGeometry x="100" y="100" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="clock_gen_label" value="pclkx1/pclkx5/S_clk_70m/clk_24m" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="100" y="160" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 摄像头配置模块 -->
        <mxCell id="cam_cfg" value="摄像头配置模块" style="rounded=1;strokeWidth=2;fillColor=#e6fff2;" parent="1">
          <mxGeometry x="100" y="220" width="180" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="ae_set" value="ae_set\n(自动曝光配置)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="100" y="260" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="uicfgcs500" value="uicfgcs500\n(摄像头配置)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="190" y="260" width="90" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 图像输入接口 -->
        <mxCell id="input_if" value="图像输入接口" style="rounded=1;strokeWidth=2;fillColor=#fff0e6;" parent="1">
          <mxGeometry x="100" y="340" width="180" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="mipi_dphy" value="mipi_dphy_rx\n(4通道接收)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="100" y="380" width="180" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="csi_unpacket" value="csi_unpacket_4lane" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="100" y="410" width="180" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="raw10_unpacket" value="raw10_unpacket_4lane" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="100" y="440" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 图像处理模块 -->
        <mxCell id="image_proc" value="图像处理模块" style="rounded=1;strokeWidth=2;fillColor=#ffe6e6;" parent="1">
          <mxGeometry x="350" y="340" width="200" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="image_correction" value="image_correction\n(图像裁剪纠正)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="350" y="380" width="200" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="isp_top" value="isp_top\n(ISP图像处理)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="350" y="410" width="200" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="face_recognition" value="face_recognition\n(人脸识别)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="350" y="440" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 内存接口模块 -->
        <mxCell id="memory_if" value="内存接口模块" style="rounded=1;strokeWidth=2;fillColor=#e6e6ff;" parent="1">
          <mxGeometry x="620" y="220" width="180" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="ddr_ip" value="ddr_ip\n(DDR3 PHY接口)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="620" y="260" width="180" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="uiFDMA" value="uiFDMA\n(AXI控制器)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="620" y="290" width="180" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="actual_ddr" value="实际DDR3内存" style="text;strokeWidth=1;fillColor=#f0f0f0;rounded=1;" parent="1">
          <mxGeometry x="620" y="340" width="180" height="40" as="geometry"/>
        </mxCell>
        
        <!-- 帧缓冲控制 -->
        <mxCell id="frame_buf" value="帧缓冲控制" style="rounded=1;strokeWidth=2;fillColor=#fff0e6;" parent="1">
          <mxGeometry x="620" y="420" width="180" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="uisetvbuf" value="uisetvbuf\n(3帧缓存管理)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="620" y="450" width="180" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="uidbuf" value="uidbuf\n(帧缓冲控制器)" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="620" y="480" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 视频时序控制 -->
        <mxCell id="vtc" value="视频时序控制\nuivtc" style="rounded=1;strokeWidth=2;fillColor=#e6ffe6;" parent="1">
          <mxGeometry x="350" y="520" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="vtc_label" value="1080P @ 137.5MHz" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="350" y="580" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 显示输出 -->
        <mxCell id="display" value="显示输出\nhdmi_tx" style="rounded=1;strokeWidth=2;fillColor=#e6f3ff;" parent="1">
          <mxGeometry x="100" y="520" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="hdmi_label" value="HDMI输出 1080P" style="text;strokeWidth=0;fillColor=none;align=center;" parent="1">
          <mxGeometry x="100" y="580" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 连接线 -->
        <!-- 时钟到各模块 -->
        <mxCell id="clk_to_mipi" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="clock_gen" target="mipi_dphy">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="190" y="160" as="sourcePoint"/>
            <mxPoint x="190" y="340" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="clk_to_cam" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="clock_gen" target="cam_cfg">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="190" y="160" as="sourcePoint"/>
            <mxPoint x="190" y="220" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="clk_to_vtc" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="clock_gen" target="vtc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="130" as="sourcePoint"/>
            <mxPoint x="440" y="520" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="clk_to_hdmi" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="clock_gen" target="display">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="130" as="sourcePoint"/>
            <mxPoint x="100" y="520" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 摄像头配置到MIPI -->
        <mxCell id="cam_to_mipi" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="cam_cfg" target="mipi_dphy">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="190" y="300" as="sourcePoint"/>
            <mxPoint x="190" y="340" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 图像处理流程 -->
        <mxCell id="raw_to_correct" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="raw10_unpacket" target="image_correction">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="440" as="sourcePoint"/>
            <mxPoint x="350" y="380" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="correct_to_isp" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="image_correction" target="isp_top">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="400" as="sourcePoint"/>
            <mxPoint x="350" y="410" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="isp_to_face" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="isp_top" target="face_recognition">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="430" as="sourcePoint"/>
            <mxPoint x="350" y="440" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 图像处理到帧缓冲 -->
        <mxCell id="face_to_buf" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="face_recognition" target="uidbuf">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="550" y="440" as="sourcePoint"/>
            <mxPoint x="710" y="480" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 帧缓冲到内存 -->
        <mxCell id="buf_to_fdma" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="uidbuf" target="uiFDMA">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="710" y="420" as="sourcePoint"/>
            <mxPoint x="710" y="290" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="fdma_to_ddr" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="uiFDMA" target="ddr_ip">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="710" y="270" as="sourcePoint"/>
            <mxPoint x="710" y="260" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="ddr_to_actual" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="ddr_ip" target="actual_ddr">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="710" y="280" as="sourcePoint"/>
            <mxPoint x="710" y="340" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 内存到显示 -->
        <mxCell id="buf_to_vtc" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="uidbuf" target="vtc">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="480" as="sourcePoint"/>
            <mxPoint x="350" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="vtc_to_hdmi" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="vtc" target="display">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="350" y="550" as="sourcePoint"/>
            <mxPoint x="190" y="550" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 帧缓冲管理连接 -->
        <mxCell id="setbuf_to_buf" style="edgeStyle=orthogonalEdgeStyle;" parent="1" source="uisetvbuf" target="uidbuf">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="710" y="470" as="sourcePoint"/>
            <mxPoint x="710" y="480" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- 数据流标签 -->
        <mxCell id="data_flow1" value="数据流向" style="text;strokeWidth=0;fillColor=none;align=center;fontStyle=1;" parent="1">
          <mxGeometry x="850" y="340" width="100" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="data_flow_arrow" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="850" y="360" as="sourcePoint"/>
            <mxPoint x="850" y="400" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>